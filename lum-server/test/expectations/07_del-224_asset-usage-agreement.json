{
    "db": [
        {
            "sqlCmd": "BEGIN TRANSACTION ISOLATION LEVEL REPEATABLE READ",
            "result": {"command": "BEGIN", "rowCount": 1, "rows": []}
        },
        {
            "sqlCmd": "SELECT TXID_CURRENT() AS txid, PG_BACKEND_PID() AS pid, NOW() AS tx_now",
            "result": {"command": "SELECT", "rowCount": 1,
                "rows": [{"txid": 123, "pid": 456, "tx_now": "__to_date__|2019-12-19T11:43:20.952Z"}]
            }
        },
        {
            "sqlCmd": "UPDATE \"assetUsageAgreement\" SET \"assetUsageAgreementRevision\" = \"assetUsageAgreementRevision\" + 1, \"closed\" = NOW() , \"assetUsageAgreementActive\" = ($3),\"closer\" = ($4),\"closureReason\" = ($5) WHERE \"softwareLicensorId\" = ($1) AND \"assetUsageAgreementId\" = ($2) RETURNING *",
            "sqlVals": ["swlic","alex-agr",false,"alex-revoke-aggr","revoked"],
            "result": {"command": "UPDATE", "rowCount": 1,
                "rows": [
                    {
                        "softwareLicensorId": "swlic",
                        "assetUsageAgreementId": "alex-agr",
                        "agreement": {
                            "uid": "agr-123",
                            "@type": "Agreement",
                            "target": {
                                "refinement": [
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCategory",
                                        "rightOperand": [
                                            "image-processing",
                                            "face-detection"
                                        ]
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogId",
                                        "rightOperand": [
                                            "XYZ models"
                                        ]
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogType",
                                        "rightOperand": [
                                            "restricted"
                                        ]
                                    }
                                ]
                            },
                            "profile": "prof",
                            "@context": {},
                            "assignee": {
                                "refinement": [
                                    {
                                        "operator": "lteq",
                                        "leftOperand": "lum:countUniqueUsers",
                                        "rightOperand": {
                                            "@type": "xsd:integer",
                                            "@value": "3"
                                        }
                                    }
                                ]
                            },
                            "assigner": {
                                "uid": "ass"
                            },
                            "permission": [
                                {
                                    "uid": "perm-1",
                                    "action": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901"
                                                ]
                                            }
                                        ]
                                    },
                                    "assignee": {
                                        "refinement": [
                                            {
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": {
                                                    "@type": "xsd:integer",
                                                    "@value": "3"
                                                }
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "lt",
                                            "leftOperand": "count",
                                            "rightOperand": "125"
                                        },
                                        {
                                            "operator": "lt",
                                            "leftOperand": "date",
                                            "rightOperand": "2020-01-01"
                                        }
                                    ]
                                }
                            ],
                            "prohibition": [
                                {
                                    "uid": "proh-2",
                                    "action": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "123456",
                                                    "789456123"
                                                ]
                                            },
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing",
                                                    "face-detection-not"
                                                ]
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "gteq",
                                            "leftOperand": "count",
                                            "rightOperand": "25"
                                        }
                                    ]
                                }
                            ]
                        },
                        "agreementRestriction": {
                            "uid": "agr-123",
                            "@type": "Agreement",
                            "target": {
                                "refinement": [
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCategory",
                                        "rightOperand": [
                                            "image-processing"
                                        ]
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogId",
                                        "rightOperand": [
                                            "XYZ models"
                                        ]
                                    }
                                ]
                            },
                            "profile": "prof-restr",
                            "@context": {},
                            "assignee": {
                                "refinement": [
                                    {
                                        "operator": "lteq",
                                        "leftOperand": "lum:countUniqueUsers",
                                        "rightOperand": "50"
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:users",
                                        "rightOperand": [
                                            "alex",
                                            "justin",
                                            "michelle"
                                        ]
                                    }
                                ]
                            },
                            "assigner": {
                                "uid": "ass-restr"
                            },
                            "permission": [
                                {
                                    "uid": "perm-1",
                                    "action": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901"
                                                ]
                                            }
                                        ]
                                    },
                                    "assignee": {
                                        "refinement": [
                                            {
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": {
                                                    "@type": "xsd:integer",
                                                    "@value": "30"
                                                }
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "lt",
                                            "leftOperand": "count",
                                            "rightOperand": "125"
                                        },
                                        {
                                            "operator": "lt",
                                            "leftOperand": "date",
                                            "rightOperand": "2018-12-01"
                                        }
                                    ]
                                }
                            ],
                            "prohibition": [
                                {
                                    "uid": "proh-3",
                                    "action": [
                                        "acumos:deploy==",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "123456",
                                                    "789456123"
                                                ]
                                            },
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing",
                                                    "face-detection-not"
                                                ]
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "gteq",
                                            "leftOperand": "count",
                                            "rightOperand": "25"
                                        }
                                    ]
                                }
                            ]
                        },
                        "groomedAgreement": {
                            "uid": "agr-123",
                            "permission": {
                                "perm-1": {
                                    "uid": "perm-1",
                                    "actions": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "enableOn": null,
                                    "expireOn": "2018-11-30",
                                    "isPerpetual": false,
                                    "actionProvided": true,
                                    "assigneeMetrics": {
                                        "users": []
                                    },
                                    "targetRefinement": {
                                        "lum:swCategory": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ]
                                        },
                                        "lum:swCatalogId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        "lum:swCatalogType": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogType",
                                            "rightOperand": [
                                                "restricted"
                                            ]
                                        },
                                        "lum:swPersistentId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                "cbf31f26-4590-4323-8991-000d9f290901",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ]
                                        }
                                    },
                                    "usageConstraints": {
                                        "count": {
                                            "origin": "fromRestriction",
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "count",
                                            "rightOperand": 124
                                        }
                                    },
                                    "assetUsageRuleType": "permission",
                                    "assigneeRefinement": {
                                        "lum:users": {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:users",
                                            "rightOperand": [
                                                "alex",
                                                "justin",
                                                "michelle"
                                            ]
                                        },
                                        "lum:countUniqueUsers": {
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": 3
                                        }
                                    },
                                    "consumedConstraints": {
                                        "onRule": [
                                            {
                                                "dataType": "date",
                                                "operator": "lt",
                                                "leftOperand": "date",
                                                "rightOperand": "2020-01-01",
                                                "consumeStatus": "consumed"
                                            },
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "count",
                                                "rightOperand": 124,
                                                "consumeStatus": "overridden"
                                            }
                                        ],
                                        "onTarget": [
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCatalogId",
                                                "rightOperand": [
                                                    "XYZ models"
                                                ],
                                                "consumeStatus": "same"
                                            },
                                            {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901",
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                                ],
                                                "consumeStatus": "same"
                                            }
                                        ],
                                        "onAssignee": [
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 3,
                                                "consumeStatus": "overridden"
                                            },
                                            {
                                                "origin": "fromRestriction",
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 30,
                                                "consumeStatus": "ignored"
                                            }
                                        ]
                                    }
                                }
                            },
                            "prohibition": {
                                "proh-2": {
                                    "uid": "proh-2",
                                    "actions": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "enableOn": null,
                                    "expireOn": null,
                                    "isPerpetual": true,
                                    "actionProvided": true,
                                    "assigneeMetrics": {
                                        "users": []
                                    },
                                    "targetRefinement": {
                                        "lum:swCategory": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ]
                                        },
                                        "lum:swCatalogId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        "lum:swCatalogType": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogType",
                                            "rightOperand": [
                                                "restricted"
                                            ]
                                        },
                                        "lum:swPersistentId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "123456",
                                                "789456123",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ]
                                        }
                                    },
                                    "usageConstraints": {},
                                    "assetUsageRuleType": "prohibition",
                                    "assigneeRefinement": {},
                                    "consumedConstraints": {
                                        "onRule": [
                                            {
                                                "dataType": "integer",
                                                "operator": "gteq",
                                                "leftOperand": "count",
                                                "rightOperand": 25,
                                                "consumeStatus": "unexpected"
                                            }
                                        ],
                                        "onTarget": [
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection-not",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            }
                                        ],
                                        "onAssignee": [
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 3,
                                                "consumeStatus": "unexpected"
                                            }
                                        ]
                                    }
                                },
                                "proh-3": {
                                    "uid": "proh-3",
                                    "actions": [
                                        "acumos:deploy==",
                                        "acumos:download"
                                    ],
                                    "enableOn": null,
                                    "expireOn": null,
                                    "isPerpetual": true,
                                    "actionProvided": true,
                                    "assigneeMetrics": {
                                        "users": []
                                    },
                                    "targetRefinement": {
                                        "lum:swCategory": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ]
                                        },
                                        "lum:swCatalogId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        "lum:swPersistentId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "123456",
                                                "789456123",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ]
                                        }
                                    },
                                    "usageConstraints": {},
                                    "assetUsageRuleType": "prohibition",
                                    "assigneeRefinement": {
                                        "lum:users": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:users",
                                            "rightOperand": [
                                                "alex",
                                                "justin",
                                                "michelle"
                                            ]
                                        }
                                    },
                                    "consumedConstraints": {
                                        "onRule": [
                                            {
                                                "dataType": "integer",
                                                "operator": "gteq",
                                                "leftOperand": "count",
                                                "rightOperand": 25,
                                                "consumeStatus": "unexpected"
                                            }
                                        ],
                                        "onTarget": [
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection-not",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            }
                                        ],
                                        "onAssignee": [
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 50,
                                                "consumeStatus": "unexpected"
                                            }
                                        ]
                                    }
                                }
                            },
                            "restriction": {
                                "uid": "agr-123",
                                "permission": {
                                    "perm-1": {
                                        "uid": "perm-1",
                                        "actions": [
                                            "acumos:deploy",
                                            "acumos:download"
                                        ],
                                        "enableOn": null,
                                        "expireOn": "2018-11-30",
                                        "isPerpetual": false,
                                        "actionProvided": true,
                                        "assigneeMetrics": {
                                            "users": []
                                        },
                                        "targetRefinement": {
                                            "lum:swCategory": {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ]
                                            },
                                            "lum:swCatalogId": {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCatalogId",
                                                "rightOperand": [
                                                    "XYZ models"
                                                ]
                                            },
                                            "lum:swPersistentId": {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901",
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                                ]
                                            }
                                        },
                                        "usageConstraints": {
                                            "count": {
                                                "origin": "fromRestriction",
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "count",
                                                "rightOperand": 124
                                            }
                                        },
                                        "assetUsageRuleType": "permission",
                                        "assigneeRefinement": {
                                            "lum:users": {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:users",
                                                "rightOperand": [
                                                    "alex",
                                                    "justin",
                                                    "michelle"
                                                ]
                                            },
                                            "lum:countUniqueUsers": {
                                                "origin": "fromRestriction",
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 30
                                            }
                                        },
                                        "consumedConstraints": {
                                            "onRule": [
                                                {
                                                    "dataType": "date",
                                                    "operator": "lt",
                                                    "leftOperand": "date",
                                                    "rightOperand": "2018-12-01",
                                                    "consumeStatus": "consumed"
                                                }
                                            ],
                                            "onTarget": [],
                                            "onAssignee": [
                                                {
                                                    "dataType": "integer",
                                                    "operator": "lteq",
                                                    "leftOperand": "lum:countUniqueUsers",
                                                    "rightOperand": 50,
                                                    "consumeStatus": "overridden"
                                                }
                                            ]
                                        }
                                    }
                                },
                                "prohibition": {
                                    "proh-3": {
                                        "uid": "proh-3",
                                        "actions": [
                                            "acumos:deploy==",
                                            "acumos:download"
                                        ],
                                        "enableOn": null,
                                        "expireOn": null,
                                        "isPerpetual": true,
                                        "actionProvided": true,
                                        "assigneeMetrics": {
                                            "users": []
                                        },
                                        "targetRefinement": {
                                            "lum:swCategory": {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ]
                                            },
                                            "lum:swCatalogId": {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCatalogId",
                                                "rightOperand": [
                                                    "XYZ models"
                                                ]
                                            },
                                            "lum:swPersistentId": {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "123456",
                                                    "789456123",
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                                ]
                                            }
                                        },
                                        "usageConstraints": {},
                                        "assetUsageRuleType": "prohibition",
                                        "assigneeRefinement": {
                                            "lum:users": {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:users",
                                                "rightOperand": [
                                                    "alex",
                                                    "justin",
                                                    "michelle"
                                                ]
                                            }
                                        },
                                        "consumedConstraints": {
                                            "onRule": [
                                                {
                                                    "dataType": "integer",
                                                    "operator": "gteq",
                                                    "leftOperand": "count",
                                                    "rightOperand": 25,
                                                    "consumeStatus": "unexpected"
                                                }
                                            ],
                                            "onTarget": [
                                                {
                                                    "dataType": "string",
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swCategory",
                                                    "rightOperand": [
                                                        "image-processing"
                                                    ],
                                                    "consumeStatus": "merged"
                                                },
                                                {
                                                    "dataType": "string",
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swCategory",
                                                    "rightOperand": [
                                                        "face-detection-not",
                                                        "image-processing"
                                                    ],
                                                    "consumeStatus": "merged"
                                                }
                                            ],
                                            "onAssignee": [
                                                {
                                                    "dataType": "integer",
                                                    "operator": "lteq",
                                                    "leftOperand": "lum:countUniqueUsers",
                                                    "rightOperand": 50,
                                                    "consumeStatus": "unexpected"
                                                }
                                            ]
                                        }
                                    }
                                }
                            },
                            "initialAgreement": {
                                "uid": "agr-123",
                                "@type": "Agreement",
                                "target": {
                                    "refinement": [
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing",
                                                "face-detection"
                                            ]
                                        },
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogType",
                                            "rightOperand": [
                                                "restricted"
                                            ]
                                        }
                                    ]
                                },
                                "profile": "prof",
                                "@context": {},
                                "assignee": {
                                    "refinement": [
                                        {
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": {
                                                "@type": "xsd:integer",
                                                "@value": "3"
                                            }
                                        }
                                    ]
                                },
                                "assigner": {
                                    "uid": "ass"
                                },
                                "permission": [
                                    {
                                        "uid": "perm-1",
                                        "action": [
                                            "acumos:deploy",
                                            "acumos:download"
                                        ],
                                        "target": {
                                            "refinement": [
                                                {
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swPersistentId",
                                                    "rightOperand": [
                                                        "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                        "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                        "cbf31f26-4590-4323-8991-000d9f290901"
                                                    ]
                                                }
                                            ]
                                        },
                                        "assignee": {
                                            "refinement": [
                                                {
                                                    "operator": "lteq",
                                                    "leftOperand": "lum:countUniqueUsers",
                                                    "rightOperand": {
                                                        "@type": "xsd:integer",
                                                        "@value": "3"
                                                    }
                                                }
                                            ]
                                        },
                                        "constraint": [
                                            {
                                                "operator": "lt",
                                                "leftOperand": "count",
                                                "rightOperand": "125"
                                            },
                                            {
                                                "operator": "lt",
                                                "leftOperand": "date",
                                                "rightOperand": "2020-01-01"
                                            }
                                        ]
                                    }
                                ],
                                "prohibition": [
                                    {
                                        "uid": "proh-2",
                                        "action": [
                                            "acumos:deploy",
                                            "acumos:download"
                                        ],
                                        "target": {
                                            "refinement": [
                                                {
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swPersistentId",
                                                    "rightOperand": [
                                                        "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                        "123456",
                                                        "789456123"
                                                    ]
                                                },
                                                {
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swCategory",
                                                    "rightOperand": [
                                                        "image-processing",
                                                        "face-detection-not"
                                                    ]
                                                }
                                            ]
                                        },
                                        "constraint": [
                                            {
                                                "operator": "gteq",
                                                "leftOperand": "count",
                                                "rightOperand": "25"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "ignoredPermissionRestrictions": {},
                            "ignoredProhibitionRestrictions": {}
                        },
                        "assetUsageAgreementRevision": 28,
                        "assetUsageAgreementActive": false,
                        "creator": "alex-agr-user",
                        "created": "2019-10-23T15:15:45.941Z",
                        "modifier": "alex-agr-user",
                        "modified": "2019-12-20T17:31:13.002Z",
                        "closer": "alex-revoke-aggr",
                        "closed": "2019-12-24T15:00:25.677Z",
                        "closureReason": "revoked"
                    }
                ]
            }
        },
        {
            "sqlCmd": "INSERT INTO \"snapshot\" (\"softwareLicensorId\",\"snapshotType\",\"snapshotKey\",\"snapshotRevision\" , \"snapshotBody\",\"creator\",\"requestId\",\"txStep\") VALUES (($1),($2),($3),($4) , ($5),($6),($7),($8)) ON CONFLICT (\"softwareLicensorId\",\"snapshotType\",\"snapshotKey\",\"snapshotRevision\") DO NOTHING",
            "sqlVals": [
                "swlic",
                "assetUsageAgreement",
                "alex-agr",
                28,
                {
                    "softwareLicensorId": "swlic",
                    "assetUsageAgreementId": "alex-agr",
                    "agreement": {
                        "uid": "agr-123",
                        "@type": "Agreement",
                        "target": {
                            "refinement": [
                                {
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCategory",
                                    "rightOperand": [
                                        "image-processing",
                                        "face-detection"
                                    ]
                                },
                                {
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCatalogId",
                                    "rightOperand": [
                                        "XYZ models"
                                    ]
                                },
                                {
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCatalogType",
                                    "rightOperand": [
                                        "restricted"
                                    ]
                                }
                            ]
                        },
                        "profile": "prof",
                        "@context": {},
                        "assignee": {
                            "refinement": [
                                {
                                    "operator": "lteq",
                                    "leftOperand": "lum:countUniqueUsers",
                                    "rightOperand": {
                                        "@type": "xsd:integer",
                                        "@value": "3"
                                    }
                                }
                            ]
                        },
                        "assigner": {
                            "uid": "ass"
                        },
                        "permission": [
                            {
                                "uid": "perm-1",
                                "action": [
                                    "acumos:deploy",
                                    "acumos:download"
                                ],
                                "target": {
                                    "refinement": [
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                "cbf31f26-4590-4323-8991-000d9f290901"
                                            ]
                                        }
                                    ]
                                },
                                "assignee": {
                                    "refinement": [
                                        {
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": {
                                                "@type": "xsd:integer",
                                                "@value": "3"
                                            }
                                        }
                                    ]
                                },
                                "constraint": [
                                    {
                                        "operator": "lt",
                                        "leftOperand": "count",
                                        "rightOperand": "125"
                                    },
                                    {
                                        "operator": "lt",
                                        "leftOperand": "date",
                                        "rightOperand": "2020-01-01"
                                    }
                                ]
                            }
                        ],
                        "prohibition": [
                            {
                                "uid": "proh-2",
                                "action": [
                                    "acumos:deploy",
                                    "acumos:download"
                                ],
                                "target": {
                                    "refinement": [
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                "123456",
                                                "789456123"
                                            ]
                                        },
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing",
                                                "face-detection-not"
                                            ]
                                        }
                                    ]
                                },
                                "constraint": [
                                    {
                                        "operator": "gteq",
                                        "leftOperand": "count",
                                        "rightOperand": "25"
                                    }
                                ]
                            }
                        ]
                    },
                    "agreementRestriction": {
                        "uid": "agr-123",
                        "@type": "Agreement",
                        "target": {
                            "refinement": [
                                {
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCategory",
                                    "rightOperand": [
                                        "image-processing"
                                    ]
                                },
                                {
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCatalogId",
                                    "rightOperand": [
                                        "XYZ models"
                                    ]
                                }
                            ]
                        },
                        "profile": "prof-restr",
                        "@context": {},
                        "assignee": {
                            "refinement": [
                                {
                                    "operator": "lteq",
                                    "leftOperand": "lum:countUniqueUsers",
                                    "rightOperand": "50"
                                },
                                {
                                    "operator": "lum:in",
                                    "leftOperand": "lum:users",
                                    "rightOperand": [
                                        "alex",
                                        "justin",
                                        "michelle"
                                    ]
                                }
                            ]
                        },
                        "assigner": {
                            "uid": "ass-restr"
                        },
                        "permission": [
                            {
                                "uid": "perm-1",
                                "action": [
                                    "acumos:deploy",
                                    "acumos:download"
                                ],
                                "target": {
                                    "refinement": [
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                "cbf31f26-4590-4323-8991-000d9f290901"
                                            ]
                                        }
                                    ]
                                },
                                "assignee": {
                                    "refinement": [
                                        {
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": {
                                                "@type": "xsd:integer",
                                                "@value": "30"
                                            }
                                        }
                                    ]
                                },
                                "constraint": [
                                    {
                                        "operator": "lt",
                                        "leftOperand": "count",
                                        "rightOperand": "125"
                                    },
                                    {
                                        "operator": "lt",
                                        "leftOperand": "date",
                                        "rightOperand": "2018-12-01"
                                    }
                                ]
                            }
                        ],
                        "prohibition": [
                            {
                                "uid": "proh-3",
                                "action": [
                                    "acumos:deploy==",
                                    "acumos:download"
                                ],
                                "target": {
                                    "refinement": [
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                "123456",
                                                "789456123"
                                            ]
                                        },
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing",
                                                "face-detection-not"
                                            ]
                                        }
                                    ]
                                },
                                "constraint": [
                                    {
                                        "operator": "gteq",
                                        "leftOperand": "count",
                                        "rightOperand": "25"
                                    }
                                ]
                            }
                        ]
                    },
                    "groomedAgreement": {
                        "uid": "agr-123",
                        "permission": {
                            "perm-1": {
                                "uid": "perm-1",
                                "actions": [
                                    "acumos:deploy",
                                    "acumos:download"
                                ],
                                "enableOn": null,
                                "expireOn": "2018-11-30",
                                "isPerpetual": false,
                                "actionProvided": true,
                                "assigneeMetrics": {
                                    "users": []
                                },
                                "targetRefinement": {
                                    "lum:swCategory": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCategory",
                                        "rightOperand": [
                                            "image-processing"
                                        ]
                                    },
                                    "lum:swCatalogId": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogId",
                                        "rightOperand": [
                                            "XYZ models"
                                        ]
                                    },
                                    "lum:swCatalogType": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogType",
                                        "rightOperand": [
                                            "restricted"
                                        ]
                                    },
                                    "lum:swPersistentId": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swPersistentId",
                                        "rightOperand": [
                                            "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                            "cbf31f26-4590-4323-8991-000d9f290901",
                                            "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                        ]
                                    }
                                },
                                "usageConstraints": {
                                    "count": {
                                        "origin": "fromRestriction",
                                        "dataType": "integer",
                                        "operator": "lteq",
                                        "leftOperand": "count",
                                        "rightOperand": 124
                                    }
                                },
                                "assetUsageRuleType": "permission",
                                "assigneeRefinement": {
                                    "lum:users": {
                                        "origin": "fromRestriction",
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:users",
                                        "rightOperand": [
                                            "alex",
                                            "justin",
                                            "michelle"
                                        ]
                                    },
                                    "lum:countUniqueUsers": {
                                        "dataType": "integer",
                                        "operator": "lteq",
                                        "leftOperand": "lum:countUniqueUsers",
                                        "rightOperand": 3
                                    }
                                },
                                "consumedConstraints": {
                                    "onRule": [
                                        {
                                            "dataType": "date",
                                            "operator": "lt",
                                            "leftOperand": "date",
                                            "rightOperand": "2020-01-01",
                                            "consumeStatus": "consumed"
                                        },
                                        {
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "count",
                                            "rightOperand": 124,
                                            "consumeStatus": "overridden"
                                        }
                                    ],
                                    "onTarget": [
                                        {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "face-detection",
                                                "image-processing"
                                            ],
                                            "consumeStatus": "merged"
                                        },
                                        {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ],
                                            "consumeStatus": "merged"
                                        },
                                        {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ],
                                            "consumeStatus": "same"
                                        },
                                        {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                "cbf31f26-4590-4323-8991-000d9f290901",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ],
                                            "consumeStatus": "same"
                                        }
                                    ],
                                    "onAssignee": [
                                        {
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": 3,
                                            "consumeStatus": "overridden"
                                        },
                                        {
                                            "origin": "fromRestriction",
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": 30,
                                            "consumeStatus": "ignored"
                                        }
                                    ]
                                }
                            }
                        },
                        "prohibition": {
                            "proh-2": {
                                "uid": "proh-2",
                                "actions": [
                                    "acumos:deploy",
                                    "acumos:download"
                                ],
                                "enableOn": null,
                                "expireOn": null,
                                "isPerpetual": true,
                                "actionProvided": true,
                                "assigneeMetrics": {
                                    "users": []
                                },
                                "targetRefinement": {
                                    "lum:swCategory": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCategory",
                                        "rightOperand": [
                                            "image-processing"
                                        ]
                                    },
                                    "lum:swCatalogId": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogId",
                                        "rightOperand": [
                                            "XYZ models"
                                        ]
                                    },
                                    "lum:swCatalogType": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogType",
                                        "rightOperand": [
                                            "restricted"
                                        ]
                                    },
                                    "lum:swPersistentId": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swPersistentId",
                                        "rightOperand": [
                                            "123456",
                                            "789456123",
                                            "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                        ]
                                    }
                                },
                                "usageConstraints": {},
                                "assetUsageRuleType": "prohibition",
                                "assigneeRefinement": {},
                                "consumedConstraints": {
                                    "onRule": [
                                        {
                                            "dataType": "integer",
                                            "operator": "gteq",
                                            "leftOperand": "count",
                                            "rightOperand": 25,
                                            "consumeStatus": "unexpected"
                                        }
                                    ],
                                    "onTarget": [
                                        {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "face-detection",
                                                "image-processing"
                                            ],
                                            "consumeStatus": "merged"
                                        },
                                        {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "face-detection-not",
                                                "image-processing"
                                            ],
                                            "consumeStatus": "merged"
                                        }
                                    ],
                                    "onAssignee": [
                                        {
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": 3,
                                            "consumeStatus": "unexpected"
                                        }
                                    ]
                                }
                            },
                            "proh-3": {
                                "uid": "proh-3",
                                "actions": [
                                    "acumos:deploy==",
                                    "acumos:download"
                                ],
                                "enableOn": null,
                                "expireOn": null,
                                "isPerpetual": true,
                                "actionProvided": true,
                                "assigneeMetrics": {
                                    "users": []
                                },
                                "targetRefinement": {
                                    "lum:swCategory": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCategory",
                                        "rightOperand": [
                                            "image-processing"
                                        ]
                                    },
                                    "lum:swCatalogId": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogId",
                                        "rightOperand": [
                                            "XYZ models"
                                        ]
                                    },
                                    "lum:swPersistentId": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swPersistentId",
                                        "rightOperand": [
                                            "123456",
                                            "789456123",
                                            "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                        ]
                                    }
                                },
                                "usageConstraints": {},
                                "assetUsageRuleType": "prohibition",
                                "assigneeRefinement": {
                                    "lum:users": {
                                        "dataType": "string",
                                        "operator": "lum:in",
                                        "leftOperand": "lum:users",
                                        "rightOperand": [
                                            "alex",
                                            "justin",
                                            "michelle"
                                        ]
                                    }
                                },
                                "consumedConstraints": {
                                    "onRule": [
                                        {
                                            "dataType": "integer",
                                            "operator": "gteq",
                                            "leftOperand": "count",
                                            "rightOperand": 25,
                                            "consumeStatus": "unexpected"
                                        }
                                    ],
                                    "onTarget": [
                                        {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ],
                                            "consumeStatus": "merged"
                                        },
                                        {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "face-detection-not",
                                                "image-processing"
                                            ],
                                            "consumeStatus": "merged"
                                        }
                                    ],
                                    "onAssignee": [
                                        {
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": 50,
                                            "consumeStatus": "unexpected"
                                        }
                                    ]
                                }
                            }
                        },
                        "restriction": {
                            "uid": "agr-123",
                            "permission": {
                                "perm-1": {
                                    "uid": "perm-1",
                                    "actions": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "enableOn": null,
                                    "expireOn": "2018-11-30",
                                    "isPerpetual": false,
                                    "actionProvided": true,
                                    "assigneeMetrics": {
                                        "users": []
                                    },
                                    "targetRefinement": {
                                        "lum:swCategory": {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ]
                                        },
                                        "lum:swCatalogId": {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        "lum:swPersistentId": {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                "cbf31f26-4590-4323-8991-000d9f290901",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ]
                                        }
                                    },
                                    "usageConstraints": {
                                        "count": {
                                            "origin": "fromRestriction",
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "count",
                                            "rightOperand": 124
                                        }
                                    },
                                    "assetUsageRuleType": "permission",
                                    "assigneeRefinement": {
                                        "lum:users": {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:users",
                                            "rightOperand": [
                                                "alex",
                                                "justin",
                                                "michelle"
                                            ]
                                        },
                                        "lum:countUniqueUsers": {
                                            "origin": "fromRestriction",
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": 30
                                        }
                                    },
                                    "consumedConstraints": {
                                        "onRule": [
                                            {
                                                "dataType": "date",
                                                "operator": "lt",
                                                "leftOperand": "date",
                                                "rightOperand": "2018-12-01",
                                                "consumeStatus": "consumed"
                                            }
                                        ],
                                        "onTarget": [],
                                        "onAssignee": [
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 50,
                                                "consumeStatus": "overridden"
                                            }
                                        ]
                                    }
                                }
                            },
                            "prohibition": {
                                "proh-3": {
                                    "uid": "proh-3",
                                    "actions": [
                                        "acumos:deploy==",
                                        "acumos:download"
                                    ],
                                    "enableOn": null,
                                    "expireOn": null,
                                    "isPerpetual": true,
                                    "actionProvided": true,
                                    "assigneeMetrics": {
                                        "users": []
                                    },
                                    "targetRefinement": {
                                        "lum:swCategory": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ]
                                        },
                                        "lum:swCatalogId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        "lum:swPersistentId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "123456",
                                                "789456123",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ]
                                        }
                                    },
                                    "usageConstraints": {},
                                    "assetUsageRuleType": "prohibition",
                                    "assigneeRefinement": {
                                        "lum:users": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:users",
                                            "rightOperand": [
                                                "alex",
                                                "justin",
                                                "michelle"
                                            ]
                                        }
                                    },
                                    "consumedConstraints": {
                                        "onRule": [
                                            {
                                                "dataType": "integer",
                                                "operator": "gteq",
                                                "leftOperand": "count",
                                                "rightOperand": 25,
                                                "consumeStatus": "unexpected"
                                            }
                                        ],
                                        "onTarget": [
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection-not",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            }
                                        ],
                                        "onAssignee": [
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 50,
                                                "consumeStatus": "unexpected"
                                            }
                                        ]
                                    }
                                }
                            }
                        },
                        "initialAgreement": {
                            "uid": "agr-123",
                            "@type": "Agreement",
                            "target": {
                                "refinement": [
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCategory",
                                        "rightOperand": [
                                            "image-processing",
                                            "face-detection"
                                        ]
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogId",
                                        "rightOperand": [
                                            "XYZ models"
                                        ]
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogType",
                                        "rightOperand": [
                                            "restricted"
                                        ]
                                    }
                                ]
                            },
                            "profile": "prof",
                            "@context": {},
                            "assignee": {
                                "refinement": [
                                    {
                                        "operator": "lteq",
                                        "leftOperand": "lum:countUniqueUsers",
                                        "rightOperand": {
                                            "@type": "xsd:integer",
                                            "@value": "3"
                                        }
                                    }
                                ]
                            },
                            "assigner": {
                                "uid": "ass"
                            },
                            "permission": [
                                {
                                    "uid": "perm-1",
                                    "action": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901"
                                                ]
                                            }
                                        ]
                                    },
                                    "assignee": {
                                        "refinement": [
                                            {
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": {
                                                    "@type": "xsd:integer",
                                                    "@value": "3"
                                                }
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "lt",
                                            "leftOperand": "count",
                                            "rightOperand": "125"
                                        },
                                        {
                                            "operator": "lt",
                                            "leftOperand": "date",
                                            "rightOperand": "2020-01-01"
                                        }
                                    ]
                                }
                            ],
                            "prohibition": [
                                {
                                    "uid": "proh-2",
                                    "action": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "123456",
                                                    "789456123"
                                                ]
                                            },
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing",
                                                    "face-detection-not"
                                                ]
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "gteq",
                                            "leftOperand": "count",
                                            "rightOperand": "25"
                                        }
                                    ]
                                }
                            ]
                        },
                        "ignoredPermissionRestrictions": {},
                        "ignoredProhibitionRestrictions": {}
                    },
                    "assetUsageAgreementRevision": 28,
                    "assetUsageAgreementActive": false,
                    "creator": "alex-agr-user",
                    "created": "2019-10-23T15:15:45.941Z",
                    "modifier": "alex-agr-user",
                    "modified": "2019-12-20T17:31:13.002Z",
                    "closer": "alex-revoke-aggr",
                    "closed": "2019-12-24T15:00:25.677Z",
                    "closureReason": "revoked"
                },
                "alex-revoke-aggr",
                "__type__uuid__",
                "[01] revokeAssetUsageAgreement"
            ],
            "result": {"command":"INSERT","rowCount":1,"rows":[]}
        },
        {
            "sqlCmd": "UPDATE \"rightToUse\" SET \"rightToUseRevision\" = \"rightToUseRevision\" + 1, \"closed\" = NOW() , \"rightToUseActive\" = ($5),\"closer\" = ($6),\"closureReason\" = ($7) WHERE \"softwareLicensorId\" = ($1) AND \"assetUsageAgreementId\" = ($2) AND \"rightToUseActive\" = ($3) AND NOT (\"rightToUseRevision\" = ($4)) RETURNING *",
            "sqlVals": ["swlic","alex-agr",true,28,false,"alex-revoke-aggr","revoked"],
            "result": {"command": "UPDATE", "rowCount": 3,
                "rows": [
                    {
                        "assetUsageRuleId": "f6f490e9-de37-46c6-9c43-be1d379d4da8",
                        "softwareLicensorId": "swlic",
                        "assetUsageAgreementId": "alex-agr",
                        "rightToUseId": "proh-2",
                        "assetUsageRuleType": "prohibition",
                        "actions": [
                            "acumos:deploy",
                            "acumos:download"
                        ],
                        "targetRefinement": {
                            "lum:swCategory": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "image-processing"
                                ]
                            },
                            "lum:swCatalogId": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCatalogId",
                                "rightOperand": [
                                    "XYZ models"
                                ]
                            },
                            "lum:swCatalogType": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCatalogType",
                                "rightOperand": [
                                    "restricted"
                                ]
                            },
                            "lum:swPersistentId": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swPersistentId",
                                "rightOperand": [
                                    "123456",
                                    "789456123",
                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                ]
                            }
                        },
                        "assigneeRefinement": {},
                        "usageConstraints": {},
                        "consumedConstraints": {
                            "onRule": [
                                {
                                    "dataType": "integer",
                                    "operator": "gteq",
                                    "leftOperand": "count",
                                    "rightOperand": 25,
                                    "consumeStatus": "unexpected"
                                }
                            ],
                            "onTarget": [
                                {
                                    "dataType": "string",
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCategory",
                                    "rightOperand": [
                                        "face-detection",
                                        "image-processing"
                                    ],
                                    "consumeStatus": "merged"
                                },
                                {
                                    "dataType": "string",
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCategory",
                                    "rightOperand": [
                                        "face-detection-not",
                                        "image-processing"
                                    ],
                                    "consumeStatus": "merged"
                                }
                            ],
                            "onAssignee": [
                                {
                                    "dataType": "integer",
                                    "operator": "lteq",
                                    "leftOperand": "lum:countUniqueUsers",
                                    "rightOperand": 3,
                                    "consumeStatus": "unexpected"
                                }
                            ]
                        },
                        "licenseKeys": null,
                        "isPerpetual": true,
                        "enableOn": null,
                        "expireOn": null,
                        "goodFor": null,
                        "assigneeMetrics": {
                            "users": []
                        },
                        "usageStartReqId": null,
                        "usageStarted": null,
                        "usageEnds": null,
                        "rightToUseRevision": 28,
                        "metricsRevision": 0,
                        "rightToUseActive": false,
                        "creator": "alex-agr-user",
                        "created": "2019-10-23T15:15:45.941Z",
                        "modifier": "alex-agr-user",
                        "modified": "2019-12-20T17:31:13.002Z",
                        "closer": "alex-revoke-aggr",
                        "closed": "2019-12-24T15:00:25.677Z",
                        "closureReason": "revoked",
                        "metricsModifierReqId": null,
                        "metricsModified": null
                    },
                    {
                        "assetUsageRuleId": "9648eb43-8553-4382-8385-8556f735ba33",
                        "softwareLicensorId": "swlic",
                        "assetUsageAgreementId": "alex-agr",
                        "rightToUseId": "perm-1",
                        "assetUsageRuleType": "permission",
                        "actions": [
                            "acumos:deploy",
                            "acumos:download"
                        ],
                        "targetRefinement": {
                            "lum:swCategory": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "image-processing"
                                ]
                            },
                            "lum:swCatalogId": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCatalogId",
                                "rightOperand": [
                                    "XYZ models"
                                ]
                            },
                            "lum:swCatalogType": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCatalogType",
                                "rightOperand": [
                                    "restricted"
                                ]
                            },
                            "lum:swPersistentId": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swPersistentId",
                                "rightOperand": [
                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                    "cbf31f26-4590-4323-8991-000d9f290901",
                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                ]
                            }
                        },
                        "assigneeRefinement": {
                            "lum:users": {
                                "origin": "fromRestriction",
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:users",
                                "rightOperand": [
                                    "alex",
                                    "justin",
                                    "michelle"
                                ]
                            },
                            "lum:countUniqueUsers": {
                                "dataType": "integer",
                                "operator": "lteq",
                                "leftOperand": "lum:countUniqueUsers",
                                "rightOperand": 3
                            }
                        },
                        "usageConstraints": {
                            "count": {
                                "origin": "fromRestriction",
                                "dataType": "integer",
                                "operator": "lteq",
                                "leftOperand": "count",
                                "rightOperand": 124
                            }
                        },
                        "consumedConstraints": {
                            "onRule": [
                                {
                                    "dataType": "date",
                                    "operator": "lt",
                                    "leftOperand": "date",
                                    "rightOperand": "2020-01-01",
                                    "consumeStatus": "consumed"
                                },
                                {
                                    "dataType": "integer",
                                    "operator": "lteq",
                                    "leftOperand": "count",
                                    "rightOperand": 124,
                                    "consumeStatus": "overridden"
                                }
                            ],
                            "onTarget": [
                                {
                                    "dataType": "string",
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCategory",
                                    "rightOperand": [
                                        "face-detection",
                                        "image-processing"
                                    ],
                                    "consumeStatus": "merged"
                                },
                                {
                                    "origin": "fromRestriction",
                                    "dataType": "string",
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCategory",
                                    "rightOperand": [
                                        "image-processing"
                                    ],
                                    "consumeStatus": "merged"
                                },
                                {
                                    "origin": "fromRestriction",
                                    "dataType": "string",
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCatalogId",
                                    "rightOperand": [
                                        "XYZ models"
                                    ],
                                    "consumeStatus": "same"
                                },
                                {
                                    "origin": "fromRestriction",
                                    "dataType": "string",
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swPersistentId",
                                    "rightOperand": [
                                        "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                        "cbf31f26-4590-4323-8991-000d9f290901",
                                        "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                    ],
                                    "consumeStatus": "same"
                                }
                            ],
                            "onAssignee": [
                                {
                                    "dataType": "integer",
                                    "operator": "lteq",
                                    "leftOperand": "lum:countUniqueUsers",
                                    "rightOperand": 3,
                                    "consumeStatus": "overridden"
                                },
                                {
                                    "origin": "fromRestriction",
                                    "dataType": "integer",
                                    "operator": "lteq",
                                    "leftOperand": "lum:countUniqueUsers",
                                    "rightOperand": 30,
                                    "consumeStatus": "ignored"
                                }
                            ]
                        },
                        "licenseKeys": null,
                        "isPerpetual": false,
                        "enableOn": null,
                        "expireOn": "2018-11-30T00:00:00.000Z",
                        "goodFor": null,
                        "assigneeMetrics": {
                            "users": [
                                "alex-usage",
                                "alex"
                            ]
                        },
                        "usageStartReqId": "ec0b6850-4268-4a85-89db-8cbc3c4a69f4",
                        "usageStarted": "2019-10-23T15:16:41.856Z",
                        "usageEnds": null,
                        "rightToUseRevision": 28,
                        "metricsRevision": 2,
                        "rightToUseActive": false,
                        "creator": "alex-agr-user",
                        "created": "2019-10-23T15:15:45.941Z",
                        "modifier": "alex-agr-user",
                        "modified": "2019-12-20T17:31:13.002Z",
                        "closer": "alex-revoke-aggr",
                        "closed": "2019-12-24T15:00:25.677Z",
                        "closureReason": "revoked",
                        "metricsModifierReqId": "eb0b761e-d94f-4a2f-8899-77b544447f1a",
                        "metricsModified": "2019-10-24T18:59:31.550Z"
                    },
                    {
                        "assetUsageRuleId": "cc5767df-0ed8-4cc8-8e14-2db2e74a1879",
                        "softwareLicensorId": "swlic",
                        "assetUsageAgreementId": "alex-agr",
                        "rightToUseId": "proh-3",
                        "assetUsageRuleType": "prohibition",
                        "actions": [
                            "acumos:deploy==",
                            "acumos:download"
                        ],
                        "targetRefinement": {
                            "lum:swCategory": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "image-processing"
                                ]
                            },
                            "lum:swCatalogId": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCatalogId",
                                "rightOperand": [
                                    "XYZ models"
                                ]
                            },
                            "lum:swPersistentId": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swPersistentId",
                                "rightOperand": [
                                    "123456",
                                    "789456123",
                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                ]
                            }
                        },
                        "assigneeRefinement": {
                            "lum:users": {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:users",
                                "rightOperand": [
                                    "alex",
                                    "justin",
                                    "michelle"
                                ]
                            }
                        },
                        "usageConstraints": {},
                        "consumedConstraints": {
                            "onRule": [
                                {
                                    "dataType": "integer",
                                    "operator": "gteq",
                                    "leftOperand": "count",
                                    "rightOperand": 25,
                                    "consumeStatus": "unexpected"
                                }
                            ],
                            "onTarget": [
                                {
                                    "dataType": "string",
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCategory",
                                    "rightOperand": [
                                        "image-processing"
                                    ],
                                    "consumeStatus": "merged"
                                },
                                {
                                    "dataType": "string",
                                    "operator": "lum:in",
                                    "leftOperand": "lum:swCategory",
                                    "rightOperand": [
                                        "face-detection-not",
                                        "image-processing"
                                    ],
                                    "consumeStatus": "merged"
                                }
                            ],
                            "onAssignee": [
                                {
                                    "dataType": "integer",
                                    "operator": "lteq",
                                    "leftOperand": "lum:countUniqueUsers",
                                    "rightOperand": 50,
                                    "consumeStatus": "unexpected"
                                }
                            ]
                        },
                        "licenseKeys": null,
                        "isPerpetual": true,
                        "enableOn": null,
                        "expireOn": null,
                        "goodFor": null,
                        "assigneeMetrics": {
                            "users": []
                        },
                        "usageStartReqId": null,
                        "usageStarted": null,
                        "usageEnds": null,
                        "rightToUseRevision": 28,
                        "metricsRevision": 0,
                        "rightToUseActive": false,
                        "creator": "alex-agr-user",
                        "created": "2019-10-23T15:17:15.532Z",
                        "modifier": "alex-agr-user",
                        "modified": "2019-12-20T17:31:13.002Z",
                        "closer": "alex-revoke-aggr",
                        "closed": "2019-12-24T15:00:25.677Z",
                        "closureReason": "revoked",
                        "metricsModifierReqId": null,
                        "metricsModified": null
                    }
                ]
            }
        },
        {
            "sqlCmd": "INSERT INTO \"snapshot\" (\"softwareLicensorId\",\"snapshotType\",\"snapshotKey\",\"snapshotRevision\" , \"snapshotBody\",\"creator\",\"requestId\",\"txStep\") VALUES (($1),($2),($3),($4) , ($5),($6),($7),($8)) ON CONFLICT (\"softwareLicensorId\",\"snapshotType\",\"snapshotKey\",\"snapshotRevision\") DO NOTHING",
            "sqlVals": [
                "swlic",
                "rightToUse",
                "f6f490e9-de37-46c6-9c43-be1d379d4da8",
                28,
                {
                    "assetUsageRuleId": "f6f490e9-de37-46c6-9c43-be1d379d4da8",
                    "softwareLicensorId": "swlic",
                    "assetUsageAgreementId": "alex-agr",
                    "rightToUseId": "proh-2",
                    "assetUsageRuleType": "prohibition",
                    "actions": [
                        "acumos:deploy",
                        "acumos:download"
                    ],
                    "targetRefinement": {
                        "lum:swCategory": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swCategory",
                            "rightOperand": [
                                "image-processing"
                            ]
                        },
                        "lum:swCatalogId": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swCatalogId",
                            "rightOperand": [
                                "XYZ models"
                            ]
                        },
                        "lum:swCatalogType": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swCatalogType",
                            "rightOperand": [
                                "restricted"
                            ]
                        },
                        "lum:swPersistentId": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swPersistentId",
                            "rightOperand": [
                                "123456",
                                "789456123",
                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                            ]
                        }
                    },
                    "assigneeRefinement": {},
                    "usageConstraints": {},
                    "consumedConstraints": {
                        "onRule": [
                            {
                                "dataType": "integer",
                                "operator": "gteq",
                                "leftOperand": "count",
                                "rightOperand": 25,
                                "consumeStatus": "unexpected"
                            }
                        ],
                        "onTarget": [
                            {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "face-detection",
                                    "image-processing"
                                ],
                                "consumeStatus": "merged"
                            },
                            {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "face-detection-not",
                                    "image-processing"
                                ],
                                "consumeStatus": "merged"
                            }
                        ],
                        "onAssignee": [
                            {
                                "dataType": "integer",
                                "operator": "lteq",
                                "leftOperand": "lum:countUniqueUsers",
                                "rightOperand": 3,
                                "consumeStatus": "unexpected"
                            }
                        ]
                    },
                    "licenseKeys": null,
                    "isPerpetual": true,
                    "enableOn": null,
                    "expireOn": null,
                    "goodFor": null,
                    "assigneeMetrics": {
                        "users": []
                    },
                    "usageStartReqId": null,
                    "usageStarted": null,
                    "usageEnds": null,
                    "rightToUseRevision": 28,
                    "metricsRevision": 0,
                    "rightToUseActive": false,
                    "creator": "alex-agr-user",
                    "created": "2019-10-23T15:15:45.941Z",
                    "modifier": "alex-agr-user",
                    "modified": "2019-12-20T17:31:13.002Z",
                    "closer": "alex-revoke-aggr",
                    "closed": "2019-12-24T15:00:25.677Z",
                    "closureReason": "revoked",
                    "metricsModifierReqId": null,
                    "metricsModified": null
                },
                "alex-revoke-aggr",
                "__type__uuid__",
                "[02] revokeObsoleteRightToUse"
            ],
            "result": {"command":"INSERT","rowCount":1,"rows":[]}
        },
        {
            "sqlCmd": "INSERT INTO \"snapshot\" (\"softwareLicensorId\",\"snapshotType\",\"snapshotKey\",\"snapshotRevision\" , \"snapshotBody\",\"creator\",\"requestId\",\"txStep\") VALUES (($1),($2),($3),($4) , ($5),($6),($7),($8)) ON CONFLICT (\"softwareLicensorId\",\"snapshotType\",\"snapshotKey\",\"snapshotRevision\") DO NOTHING",
            "sqlVals": [
                "swlic",
                "rightToUse",
                "9648eb43-8553-4382-8385-8556f735ba33",
                28,
                {
                    "assetUsageRuleId": "9648eb43-8553-4382-8385-8556f735ba33",
                    "softwareLicensorId": "swlic",
                    "assetUsageAgreementId": "alex-agr",
                    "rightToUseId": "perm-1",
                    "assetUsageRuleType": "permission",
                    "actions": [
                        "acumos:deploy",
                        "acumos:download"
                    ],
                    "targetRefinement": {
                        "lum:swCategory": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swCategory",
                            "rightOperand": [
                                "image-processing"
                            ]
                        },
                        "lum:swCatalogId": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swCatalogId",
                            "rightOperand": [
                                "XYZ models"
                            ]
                        },
                        "lum:swCatalogType": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swCatalogType",
                            "rightOperand": [
                                "restricted"
                            ]
                        },
                        "lum:swPersistentId": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swPersistentId",
                            "rightOperand": [
                                "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                "cbf31f26-4590-4323-8991-000d9f290901",
                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                            ]
                        }
                    },
                    "assigneeRefinement": {
                        "lum:users": {
                            "origin": "fromRestriction",
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:users",
                            "rightOperand": [
                                "alex",
                                "justin",
                                "michelle"
                            ]
                        },
                        "lum:countUniqueUsers": {
                            "dataType": "integer",
                            "operator": "lteq",
                            "leftOperand": "lum:countUniqueUsers",
                            "rightOperand": 3
                        }
                    },
                    "usageConstraints": {
                        "count": {
                            "origin": "fromRestriction",
                            "dataType": "integer",
                            "operator": "lteq",
                            "leftOperand": "count",
                            "rightOperand": 124
                        }
                    },
                    "consumedConstraints": {
                        "onRule": [
                            {
                                "dataType": "date",
                                "operator": "lt",
                                "leftOperand": "date",
                                "rightOperand": "2020-01-01",
                                "consumeStatus": "consumed"
                            },
                            {
                                "dataType": "integer",
                                "operator": "lteq",
                                "leftOperand": "count",
                                "rightOperand": 124,
                                "consumeStatus": "overridden"
                            }
                        ],
                        "onTarget": [
                            {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "face-detection",
                                    "image-processing"
                                ],
                                "consumeStatus": "merged"
                            },
                            {
                                "origin": "fromRestriction",
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "image-processing"
                                ],
                                "consumeStatus": "merged"
                            },
                            {
                                "origin": "fromRestriction",
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCatalogId",
                                "rightOperand": [
                                    "XYZ models"
                                ],
                                "consumeStatus": "same"
                            },
                            {
                                "origin": "fromRestriction",
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swPersistentId",
                                "rightOperand": [
                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                    "cbf31f26-4590-4323-8991-000d9f290901",
                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                ],
                                "consumeStatus": "same"
                            }
                        ],
                        "onAssignee": [
                            {
                                "dataType": "integer",
                                "operator": "lteq",
                                "leftOperand": "lum:countUniqueUsers",
                                "rightOperand": 3,
                                "consumeStatus": "overridden"
                            },
                            {
                                "origin": "fromRestriction",
                                "dataType": "integer",
                                "operator": "lteq",
                                "leftOperand": "lum:countUniqueUsers",
                                "rightOperand": 30,
                                "consumeStatus": "ignored"
                            }
                        ]
                    },
                    "licenseKeys": null,
                    "isPerpetual": false,
                    "enableOn": null,
                    "expireOn": "2018-11-30T00:00:00.000Z",
                    "goodFor": null,
                    "assigneeMetrics": {
                        "users": [
                            "alex-usage",
                            "alex"
                        ]
                    },
                    "usageStartReqId": "ec0b6850-4268-4a85-89db-8cbc3c4a69f4",
                    "usageStarted": "2019-10-23T15:16:41.856Z",
                    "usageEnds": null,
                    "rightToUseRevision": 28,
                    "metricsRevision": 2,
                    "rightToUseActive": false,
                    "creator": "alex-agr-user",
                    "created": "2019-10-23T15:15:45.941Z",
                    "modifier": "alex-agr-user",
                    "modified": "2019-12-20T17:31:13.002Z",
                    "closer": "alex-revoke-aggr",
                    "closed": "2019-12-24T15:00:25.677Z",
                    "closureReason": "revoked",
                    "metricsModifierReqId": "eb0b761e-d94f-4a2f-8899-77b544447f1a",
                    "metricsModified": "2019-10-24T18:59:31.550Z"
                },
                "alex-revoke-aggr",
                "__type__uuid__",
                "[02] revokeObsoleteRightToUse"
            ],
            "result": {"command":"INSERT","rowCount":1,"rows":[]}
        },
        {
            "sqlCmd": "INSERT INTO \"snapshot\" (\"softwareLicensorId\",\"snapshotType\",\"snapshotKey\",\"snapshotRevision\" , \"snapshotBody\",\"creator\",\"requestId\",\"txStep\") VALUES (($1),($2),($3),($4) , ($5),($6),($7),($8)) ON CONFLICT (\"softwareLicensorId\",\"snapshotType\",\"snapshotKey\",\"snapshotRevision\") DO NOTHING",
            "sqlVals": [
                "swlic",
                "rightToUse",
                "cc5767df-0ed8-4cc8-8e14-2db2e74a1879",
                28,
                {
                    "assetUsageRuleId": "cc5767df-0ed8-4cc8-8e14-2db2e74a1879",
                    "softwareLicensorId": "swlic",
                    "assetUsageAgreementId": "alex-agr",
                    "rightToUseId": "proh-3",
                    "assetUsageRuleType": "prohibition",
                    "actions": [
                        "acumos:deploy==",
                        "acumos:download"
                    ],
                    "targetRefinement": {
                        "lum:swCategory": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swCategory",
                            "rightOperand": [
                                "image-processing"
                            ]
                        },
                        "lum:swCatalogId": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swCatalogId",
                            "rightOperand": [
                                "XYZ models"
                            ]
                        },
                        "lum:swPersistentId": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:swPersistentId",
                            "rightOperand": [
                                "123456",
                                "789456123",
                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                            ]
                        }
                    },
                    "assigneeRefinement": {
                        "lum:users": {
                            "dataType": "string",
                            "operator": "lum:in",
                            "leftOperand": "lum:users",
                            "rightOperand": [
                                "alex",
                                "justin",
                                "michelle"
                            ]
                        }
                    },
                    "usageConstraints": {},
                    "consumedConstraints": {
                        "onRule": [
                            {
                                "dataType": "integer",
                                "operator": "gteq",
                                "leftOperand": "count",
                                "rightOperand": 25,
                                "consumeStatus": "unexpected"
                            }
                        ],
                        "onTarget": [
                            {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "image-processing"
                                ],
                                "consumeStatus": "merged"
                            },
                            {
                                "dataType": "string",
                                "operator": "lum:in",
                                "leftOperand": "lum:swCategory",
                                "rightOperand": [
                                    "face-detection-not",
                                    "image-processing"
                                ],
                                "consumeStatus": "merged"
                            }
                        ],
                        "onAssignee": [
                            {
                                "dataType": "integer",
                                "operator": "lteq",
                                "leftOperand": "lum:countUniqueUsers",
                                "rightOperand": 50,
                                "consumeStatus": "unexpected"
                            }
                        ]
                    },
                    "licenseKeys": null,
                    "isPerpetual": true,
                    "enableOn": null,
                    "expireOn": null,
                    "goodFor": null,
                    "assigneeMetrics": {
                        "users": []
                    },
                    "usageStartReqId": null,
                    "usageStarted": null,
                    "usageEnds": null,
                    "rightToUseRevision": 28,
                    "metricsRevision": 0,
                    "rightToUseActive": false,
                    "creator": "alex-agr-user",
                    "created": "2019-10-23T15:17:15.532Z",
                    "modifier": "alex-agr-user",
                    "modified": "2019-12-20T17:31:13.002Z",
                    "closer": "alex-revoke-aggr",
                    "closed": "2019-12-24T15:00:25.677Z",
                    "closureReason": "revoked",
                    "metricsModifierReqId": null,
                    "metricsModified": null
                },
                "alex-revoke-aggr",
                "__type__uuid__",
                "[02] revokeObsoleteRightToUse"
            ],
            "result": {"command":"INSERT","rowCount":1,"rows":[]}
        },
        {
            "sqlCmd": "COMMIT",
            "result": {"command": "COMMIT", "rowCount": 1, "rows": []}
        },
        {
            "sqlCmd": "BEGIN TRANSACTION ISOLATION LEVEL REPEATABLE READ",
            "result": {"command": "BEGIN", "rowCount": 1, "rows": []}
        },
        {
            "sqlCmd": "SELECT TXID_CURRENT() AS txid, PG_BACKEND_PID() AS pid, NOW() AS tx_now",
            "result": {"command": "SELECT", "rowCount": 1,
                "rows": [{"txid": 123, "pid": 456, "tx_now": "__to_date__|2019-12-19T11:43:20.952Z"}]
            }
        },
        {
            "sqlCmd": "SELECT \"softwareLicensorId\",\"assetUsageAgreementId\", \"agreement\",\"agreementRestriction\",\"groomedAgreement\",\"assetUsageAgreementRevision\",\"assetUsageAgreementActive\",\"creator\",\"created\",\"modifier\",\"modified\",\"closer\",\"closed\",\"closureReason\" FROM \"assetUsageAgreement\" WHERE \"softwareLicensorId\" = ($1) AND \"assetUsageAgreementId\" = ($2) FOR SHARE",
            "sqlVals": ["swlic","alex-agr"],
            "result": {"command": "SELECT", "rowCount": 1,
                "rows": [
                    {
                        "softwareLicensorId": "swlic",
                        "assetUsageAgreementId": "alex-agr",
                        "agreement": {
                            "uid": "agr-123",
                            "@type": "Agreement",
                            "target": {
                                "refinement": [
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCategory",
                                        "rightOperand": [
                                            "image-processing",
                                            "face-detection"
                                        ]
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogId",
                                        "rightOperand": [
                                            "XYZ models"
                                        ]
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogType",
                                        "rightOperand": [
                                            "restricted"
                                        ]
                                    }
                                ]
                            },
                            "profile": "prof",
                            "@context": {},
                            "assignee": {
                                "refinement": [
                                    {
                                        "operator": "lteq",
                                        "leftOperand": "lum:countUniqueUsers",
                                        "rightOperand": {
                                            "@type": "xsd:integer",
                                            "@value": "3"
                                        }
                                    }
                                ]
                            },
                            "assigner": {
                                "uid": "ass"
                            },
                            "permission": [
                                {
                                    "uid": "perm-1",
                                    "action": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901"
                                                ]
                                            }
                                        ]
                                    },
                                    "assignee": {
                                        "refinement": [
                                            {
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": {
                                                    "@type": "xsd:integer",
                                                    "@value": "3"
                                                }
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "lt",
                                            "leftOperand": "count",
                                            "rightOperand": "125"
                                        },
                                        {
                                            "operator": "lt",
                                            "leftOperand": "date",
                                            "rightOperand": "2020-01-01"
                                        }
                                    ]
                                }
                            ],
                            "prohibition": [
                                {
                                    "uid": "proh-2",
                                    "action": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "123456",
                                                    "789456123"
                                                ]
                                            },
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing",
                                                    "face-detection-not"
                                                ]
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "gteq",
                                            "leftOperand": "count",
                                            "rightOperand": "25"
                                        }
                                    ]
                                }
                            ]
                        },
                        "agreementRestriction": {
                            "uid": "agr-123",
                            "@type": "Agreement",
                            "target": {
                                "refinement": [
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCategory",
                                        "rightOperand": [
                                            "image-processing"
                                        ]
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:swCatalogId",
                                        "rightOperand": [
                                            "XYZ models"
                                        ]
                                    }
                                ]
                            },
                            "profile": "prof-restr",
                            "@context": {},
                            "assignee": {
                                "refinement": [
                                    {
                                        "operator": "lteq",
                                        "leftOperand": "lum:countUniqueUsers",
                                        "rightOperand": "50"
                                    },
                                    {
                                        "operator": "lum:in",
                                        "leftOperand": "lum:users",
                                        "rightOperand": [
                                            "alex",
                                            "justin",
                                            "michelle"
                                        ]
                                    }
                                ]
                            },
                            "assigner": {
                                "uid": "ass-restr"
                            },
                            "permission": [
                                {
                                    "uid": "perm-1",
                                    "action": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901"
                                                ]
                                            }
                                        ]
                                    },
                                    "assignee": {
                                        "refinement": [
                                            {
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": {
                                                    "@type": "xsd:integer",
                                                    "@value": "30"
                                                }
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "lt",
                                            "leftOperand": "count",
                                            "rightOperand": "125"
                                        },
                                        {
                                            "operator": "lt",
                                            "leftOperand": "date",
                                            "rightOperand": "2018-12-01"
                                        }
                                    ]
                                }
                            ],
                            "prohibition": [
                                {
                                    "uid": "proh-3",
                                    "action": [
                                        "acumos:deploy==",
                                        "acumos:download"
                                    ],
                                    "target": {
                                        "refinement": [
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                    "123456",
                                                    "789456123"
                                                ]
                                            },
                                            {
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing",
                                                    "face-detection-not"
                                                ]
                                            }
                                        ]
                                    },
                                    "constraint": [
                                        {
                                            "operator": "gteq",
                                            "leftOperand": "count",
                                            "rightOperand": "25"
                                        }
                                    ]
                                }
                            ]
                        },
                        "groomedAgreement": {
                            "uid": "agr-123",
                            "permission": {
                                "perm-1": {
                                    "uid": "perm-1",
                                    "actions": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "enableOn": null,
                                    "expireOn": "2018-11-30",
                                    "isPerpetual": false,
                                    "actionProvided": true,
                                    "assigneeMetrics": {
                                        "users": []
                                    },
                                    "targetRefinement": {
                                        "lum:swCategory": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ]
                                        },
                                        "lum:swCatalogId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        "lum:swCatalogType": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogType",
                                            "rightOperand": [
                                                "restricted"
                                            ]
                                        },
                                        "lum:swPersistentId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                "cbf31f26-4590-4323-8991-000d9f290901",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ]
                                        }
                                    },
                                    "usageConstraints": {
                                        "count": {
                                            "origin": "fromRestriction",
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "count",
                                            "rightOperand": 124
                                        }
                                    },
                                    "assetUsageRuleType": "permission",
                                    "assigneeRefinement": {
                                        "lum:users": {
                                            "origin": "fromRestriction",
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:users",
                                            "rightOperand": [
                                                "alex",
                                                "justin",
                                                "michelle"
                                            ]
                                        },
                                        "lum:countUniqueUsers": {
                                            "dataType": "integer",
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": 3
                                        }
                                    },
                                    "consumedConstraints": {
                                        "onRule": [
                                            {
                                                "dataType": "date",
                                                "operator": "lt",
                                                "leftOperand": "date",
                                                "rightOperand": "2020-01-01",
                                                "consumeStatus": "consumed"
                                            },
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "count",
                                                "rightOperand": 124,
                                                "consumeStatus": "overridden"
                                            }
                                        ],
                                        "onTarget": [
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCatalogId",
                                                "rightOperand": [
                                                    "XYZ models"
                                                ],
                                                "consumeStatus": "same"
                                            },
                                            {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901",
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                                ],
                                                "consumeStatus": "same"
                                            }
                                        ],
                                        "onAssignee": [
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 3,
                                                "consumeStatus": "overridden"
                                            },
                                            {
                                                "origin": "fromRestriction",
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 30,
                                                "consumeStatus": "ignored"
                                            }
                                        ]
                                    }
                                }
                            },
                            "prohibition": {
                                "proh-2": {
                                    "uid": "proh-2",
                                    "actions": [
                                        "acumos:deploy",
                                        "acumos:download"
                                    ],
                                    "enableOn": null,
                                    "expireOn": null,
                                    "isPerpetual": true,
                                    "actionProvided": true,
                                    "assigneeMetrics": {
                                        "users": []
                                    },
                                    "targetRefinement": {
                                        "lum:swCategory": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ]
                                        },
                                        "lum:swCatalogId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        "lum:swCatalogType": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogType",
                                            "rightOperand": [
                                                "restricted"
                                            ]
                                        },
                                        "lum:swPersistentId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "123456",
                                                "789456123",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ]
                                        }
                                    },
                                    "usageConstraints": {},
                                    "assetUsageRuleType": "prohibition",
                                    "assigneeRefinement": {},
                                    "consumedConstraints": {
                                        "onRule": [
                                            {
                                                "dataType": "integer",
                                                "operator": "gteq",
                                                "leftOperand": "count",
                                                "rightOperand": 25,
                                                "consumeStatus": "unexpected"
                                            }
                                        ],
                                        "onTarget": [
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection-not",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            }
                                        ],
                                        "onAssignee": [
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 3,
                                                "consumeStatus": "unexpected"
                                            }
                                        ]
                                    }
                                },
                                "proh-3": {
                                    "uid": "proh-3",
                                    "actions": [
                                        "acumos:deploy==",
                                        "acumos:download"
                                    ],
                                    "enableOn": null,
                                    "expireOn": null,
                                    "isPerpetual": true,
                                    "actionProvided": true,
                                    "assigneeMetrics": {
                                        "users": []
                                    },
                                    "targetRefinement": {
                                        "lum:swCategory": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing"
                                            ]
                                        },
                                        "lum:swCatalogId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        "lum:swPersistentId": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swPersistentId",
                                            "rightOperand": [
                                                "123456",
                                                "789456123",
                                                "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                            ]
                                        }
                                    },
                                    "usageConstraints": {},
                                    "assetUsageRuleType": "prohibition",
                                    "assigneeRefinement": {
                                        "lum:users": {
                                            "dataType": "string",
                                            "operator": "lum:in",
                                            "leftOperand": "lum:users",
                                            "rightOperand": [
                                                "alex",
                                                "justin",
                                                "michelle"
                                            ]
                                        }
                                    },
                                    "consumedConstraints": {
                                        "onRule": [
                                            {
                                                "dataType": "integer",
                                                "operator": "gteq",
                                                "leftOperand": "count",
                                                "rightOperand": 25,
                                                "consumeStatus": "unexpected"
                                            }
                                        ],
                                        "onTarget": [
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            },
                                            {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "face-detection-not",
                                                    "image-processing"
                                                ],
                                                "consumeStatus": "merged"
                                            }
                                        ],
                                        "onAssignee": [
                                            {
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 50,
                                                "consumeStatus": "unexpected"
                                            }
                                        ]
                                    }
                                }
                            },
                            "restriction": {
                                "uid": "agr-123",
                                "permission": {
                                    "perm-1": {
                                        "uid": "perm-1",
                                        "actions": [
                                            "acumos:deploy",
                                            "acumos:download"
                                        ],
                                        "enableOn": null,
                                        "expireOn": "2018-11-30",
                                        "isPerpetual": false,
                                        "actionProvided": true,
                                        "assigneeMetrics": {
                                            "users": []
                                        },
                                        "targetRefinement": {
                                            "lum:swCategory": {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ]
                                            },
                                            "lum:swCatalogId": {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCatalogId",
                                                "rightOperand": [
                                                    "XYZ models"
                                                ]
                                            },
                                            "lum:swPersistentId": {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                    "cbf31f26-4590-4323-8991-000d9f290901",
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                                ]
                                            }
                                        },
                                        "usageConstraints": {
                                            "count": {
                                                "origin": "fromRestriction",
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "count",
                                                "rightOperand": 124
                                            }
                                        },
                                        "assetUsageRuleType": "permission",
                                        "assigneeRefinement": {
                                            "lum:users": {
                                                "origin": "fromRestriction",
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:users",
                                                "rightOperand": [
                                                    "alex",
                                                    "justin",
                                                    "michelle"
                                                ]
                                            },
                                            "lum:countUniqueUsers": {
                                                "origin": "fromRestriction",
                                                "dataType": "integer",
                                                "operator": "lteq",
                                                "leftOperand": "lum:countUniqueUsers",
                                                "rightOperand": 30
                                            }
                                        },
                                        "consumedConstraints": {
                                            "onRule": [
                                                {
                                                    "dataType": "date",
                                                    "operator": "lt",
                                                    "leftOperand": "date",
                                                    "rightOperand": "2018-12-01",
                                                    "consumeStatus": "consumed"
                                                }
                                            ],
                                            "onTarget": [],
                                            "onAssignee": [
                                                {
                                                    "dataType": "integer",
                                                    "operator": "lteq",
                                                    "leftOperand": "lum:countUniqueUsers",
                                                    "rightOperand": 50,
                                                    "consumeStatus": "overridden"
                                                }
                                            ]
                                        }
                                    }
                                },
                                "prohibition": {
                                    "proh-3": {
                                        "uid": "proh-3",
                                        "actions": [
                                            "acumos:deploy==",
                                            "acumos:download"
                                        ],
                                        "enableOn": null,
                                        "expireOn": null,
                                        "isPerpetual": true,
                                        "actionProvided": true,
                                        "assigneeMetrics": {
                                            "users": []
                                        },
                                        "targetRefinement": {
                                            "lum:swCategory": {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCategory",
                                                "rightOperand": [
                                                    "image-processing"
                                                ]
                                            },
                                            "lum:swCatalogId": {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swCatalogId",
                                                "rightOperand": [
                                                    "XYZ models"
                                                ]
                                            },
                                            "lum:swPersistentId": {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:swPersistentId",
                                                "rightOperand": [
                                                    "123456",
                                                    "789456123",
                                                    "fab0954c-d4e5-443a-8d3e-cf7620e80455"
                                                ]
                                            }
                                        },
                                        "usageConstraints": {},
                                        "assetUsageRuleType": "prohibition",
                                        "assigneeRefinement": {
                                            "lum:users": {
                                                "dataType": "string",
                                                "operator": "lum:in",
                                                "leftOperand": "lum:users",
                                                "rightOperand": [
                                                    "alex",
                                                    "justin",
                                                    "michelle"
                                                ]
                                            }
                                        },
                                        "consumedConstraints": {
                                            "onRule": [
                                                {
                                                    "dataType": "integer",
                                                    "operator": "gteq",
                                                    "leftOperand": "count",
                                                    "rightOperand": 25,
                                                    "consumeStatus": "unexpected"
                                                }
                                            ],
                                            "onTarget": [
                                                {
                                                    "dataType": "string",
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swCategory",
                                                    "rightOperand": [
                                                        "image-processing"
                                                    ],
                                                    "consumeStatus": "merged"
                                                },
                                                {
                                                    "dataType": "string",
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swCategory",
                                                    "rightOperand": [
                                                        "face-detection-not",
                                                        "image-processing"
                                                    ],
                                                    "consumeStatus": "merged"
                                                }
                                            ],
                                            "onAssignee": [
                                                {
                                                    "dataType": "integer",
                                                    "operator": "lteq",
                                                    "leftOperand": "lum:countUniqueUsers",
                                                    "rightOperand": 50,
                                                    "consumeStatus": "unexpected"
                                                }
                                            ]
                                        }
                                    }
                                }
                            },
                            "initialAgreement": {
                                "uid": "agr-123",
                                "@type": "Agreement",
                                "target": {
                                    "refinement": [
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCategory",
                                            "rightOperand": [
                                                "image-processing",
                                                "face-detection"
                                            ]
                                        },
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogId",
                                            "rightOperand": [
                                                "XYZ models"
                                            ]
                                        },
                                        {
                                            "operator": "lum:in",
                                            "leftOperand": "lum:swCatalogType",
                                            "rightOperand": [
                                                "restricted"
                                            ]
                                        }
                                    ]
                                },
                                "profile": "prof",
                                "@context": {},
                                "assignee": {
                                    "refinement": [
                                        {
                                            "operator": "lteq",
                                            "leftOperand": "lum:countUniqueUsers",
                                            "rightOperand": {
                                                "@type": "xsd:integer",
                                                "@value": "3"
                                            }
                                        }
                                    ]
                                },
                                "assigner": {
                                    "uid": "ass"
                                },
                                "permission": [
                                    {
                                        "uid": "perm-1",
                                        "action": [
                                            "acumos:deploy",
                                            "acumos:download"
                                        ],
                                        "target": {
                                            "refinement": [
                                                {
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swPersistentId",
                                                    "rightOperand": [
                                                        "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                        "c01c4e06-557c-4c21-bc22-2afd757ee7af",
                                                        "cbf31f26-4590-4323-8991-000d9f290901"
                                                    ]
                                                }
                                            ]
                                        },
                                        "assignee": {
                                            "refinement": [
                                                {
                                                    "operator": "lteq",
                                                    "leftOperand": "lum:countUniqueUsers",
                                                    "rightOperand": {
                                                        "@type": "xsd:integer",
                                                        "@value": "3"
                                                    }
                                                }
                                            ]
                                        },
                                        "constraint": [
                                            {
                                                "operator": "lt",
                                                "leftOperand": "count",
                                                "rightOperand": "125"
                                            },
                                            {
                                                "operator": "lt",
                                                "leftOperand": "date",
                                                "rightOperand": "2020-01-01"
                                            }
                                        ]
                                    }
                                ],
                                "prohibition": [
                                    {
                                        "uid": "proh-2",
                                        "action": [
                                            "acumos:deploy",
                                            "acumos:download"
                                        ],
                                        "target": {
                                            "refinement": [
                                                {
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swPersistentId",
                                                    "rightOperand": [
                                                        "fab0954c-d4e5-443a-8d3e-cf7620e80455",
                                                        "123456",
                                                        "789456123"
                                                    ]
                                                },
                                                {
                                                    "operator": "lum:in",
                                                    "leftOperand": "lum:swCategory",
                                                    "rightOperand": [
                                                        "image-processing",
                                                        "face-detection-not"
                                                    ]
                                                }
                                            ]
                                        },
                                        "constraint": [
                                            {
                                                "operator": "gteq",
                                                "leftOperand": "count",
                                                "rightOperand": "25"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "ignoredPermissionRestrictions": {},
                            "ignoredProhibitionRestrictions": {}
                        },
                        "assetUsageAgreementRevision": 28,
                        "assetUsageAgreementActive": false,
                        "creator": "alex-agr-user",
                        "created": "2019-10-23T15:15:45.941Z",
                        "modifier": "alex-agr-user",
                        "modified": "2019-12-20T17:31:13.002Z",
                        "closer": "alex-revoke-aggr",
                        "closed": "2019-12-24T15:00:25.677Z",
                        "closureReason": "revoked"
                    }
                ]
            }
        },
        {
            "sqlCmd": "COMMIT",
            "result": {"command": "COMMIT", "rowCount": 1, "rows": []}
        }
    ],
    "req": {
        "method": "DELETE",
        "path": "/api/v1/asset-usage-agreement?userId=alex-revoke-aggr&softwareLicensorId=swlic&assetUsageAgreementId=alex-agr"
    },
    "res": {
        "statusCode": 224,
        "body": {
            "userId": "alex-revoke-aggr",
            "requestId": "__type__uuid__",
            "requested": "__type__dateTime__",
            "softwareLicensorId": "swlic",
            "assetUsageAgreementId": "alex-agr",
            "status": "assetUsageAgreement revoked"
        }
    }
}
